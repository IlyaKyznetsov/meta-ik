# Download configuration
# --------------------------------------------------- #
#DL_DIR = "/home/build/downloads-warrior"
#DL_DIR = "/home/build/downloads-sumo"
DL_DIR = "/home/build/downloads-zeus"
# --------------------------------------------------- #


# Compile configuration
# --------------------------------------------------- #
BB_NUMBER_THREADS = "6"
PARALLEL_MAKE = "-j 2"
BUILD_DEBUG="0"
#SELECTED_OPTIMIZATION="-O2 -pipe ${DEBUG_FLAGS}"
SELECTED_OPTIMIZATION = "-O2 -pipe"
# --------------------------------------------------- #


# SDK configuration
# --------------------------------------------------- #
SDKMACHINE = "x86_64"
# --------------------------------------------------- #


# Yocto configuration
# --------------------------------------------------- #
#MACHINE = "qemux86-64"
#MACHINE = "imx53qsb"
MACHINE = "zynq-generic"
DISTRO = "poky"
USER_CLASSES ?= "buildstats image-mklibs image-prelink"
PATCHRESOLVE = "noop"

ACCEPT_FSL_EULA = "1"
CONF_VERSION = "1"

# Defines the size in Kbytes for the generated image
# IMAGE_ROOTFS_SIZE

# Defines additional free disk space created in the image in Kbytes.
# By default, this variable is set to "0".
# This free disk space is added to the image after the build system determines the image size as described in IMAGE_ROOTFS_SIZE.
# IMAGE_ROOTFS_EXTRA_SPACE = "1048576"

# Free space added to the image: IMAGE_OVERHEAD_FACTOR=k*BASE_REALY_SIZE (IMAGE_OVERHEAD_FACTOR = "1.5" -- added 50% free space to the image)
# IMAGE_OVERHEAD_FACTOR = "1.5"

# Disk Space Monitoring during the build
BB_DISKMON_DIRS ??= "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    STOPTASKS,/tmp,100M,100K \
    ABORT,${TMPDIR},100M,1K \
    ABORT,${DL_DIR},100M,1K \
    ABORT,${SSTATE_DIR},100M,1K \
    ABORT,/tmp,10M,1K"
# --------------------------------------------------- #


# Distro configuration
# --------------------------------------------------- #

TCLIBC = "glibc"
#TCLIBC = "musl"
#TCLIBC = "newlib"
#TCLIBC = "baremetal"

# Base distro features
DISTRO_FEATURES="${DISTRO_FEATURES_DEFAULT} ${DISTRO_FEATURES_LIBC}"
DISTRO_FEATURES_remove = " bluetooth bluez5 irda pcmcia pci nfc"
DISTRO_FEATURES_remove = " wifi nfs"
DISTRO_FEATURES_remove = " pulseaudio wayland vulkan systemd"
DISTRO_FEATURES_append = " 3g alsa sql-sqlite zeroconf openssl"
DISTRO_FEATURES_append = " glib udev"
DISTRO_FEATURES_append = " dbus"
# --------------------------------------------------- #

# X11 configuration
DISTRO_FEATURES_remove = " linuxfb directfb"
DISTRO_FEATURES_append = " opengl x11 xcb xcb-xinput"
DISTRO_FEATURES_append = " xkb xkbcommon"
# --------------------------------------------------- #

# Locale configuration
DISTRO_FEATURES_LIBC_append=" libc-locales libc-locale-code"
DISTRO_FEATURES_append=" ${DISTRO_FEATURES_LIBC}"
GLIBC_GENERATE_LOCALES = "en_US.UTF-8 ru_RU.UTF-8"
IMAGE_LINGUAS = "en-us ru-ru"
# (Useful if the target device has 64Mbytes of RAM or less)
ENABLE_BINARY_LOCALE_GENERATION = "1"
# --------------------------------------------------- #

# Image configuration
# --------------------------------------------------- #
PACKAGE_CLASSES = "package_rpm"
#PACKAGE_CLASSES = "package_ipk"
#PACKAGE_CLASSES = "package_deb"

#IMAGE_FSTYPES = "ext3 ext4 tar.gz tar.bz2 wic.vmdk wic.vdi wic.qcow2"
IMAGE_FSTYPES = "tar.gz"

#KERNEL_IMAGETYPE = "uImage"
#KERNEL_IMAGETYPE = "zImage"
# --------------------------------------------------- #

# Recipes configuration
# --------------------------------------------------- #
# Disable sdl
PACKAGECONFIG_remove_pn-qemu-native = " sdl"
PACKAGECONFIG_remove_pn-nativesdk-qemu = " sdl"

# DBus
PACKAGECONFIG_pn-dbus_remove="  systemd"
PACKAGECONFIG_pn-dbus_append="  x11 user-session"

# Qt Base
PACKAGECONFIG_pn-qtbase_remove=" debug developer directfb eglfs examples gbm getentropy gif gl gtk harfbuzz ico iconv icu journald kms lttng no-opengl  pcre qtquickcompiler  sm sql-db2 sql-ibase sql-mysql sql-oci sql-odbc sql-psql sql-sqlite2 sql-tds static tests tools libproxy"

PACKAGECONFIG_pn-qtbase_remove=" linuxfb tslib"

PACKAGECONFIG_pn-qtbase_remove=" cups"

PACKAGECONFIG_pn-qtbase_append=" accessibility release optimize-size ltcg libs widgets glib zlib openssl fontconfig freetype harfbuzz libpng iconv"

PACKAGECONFIG_pn-qtbase_append=" sql-sqlite"

PACKAGECONFIG_pn-qtbase_append=" dbus libinput mtdev evdev udev gles2  xcb xcb-xinput xkb xkbcommon"

# for build Qt SDK component QtWebKit
PACKAGECONFIG_pn-qtbase_append=" jpeg"

# Qt Tests
PACKAGECONFIG_pn-qttools_remove=" examples qtwebkit tests"

# Qt Declarative
PACKAGECONFIG_pn-qtdeclarative_remove=" examples qml-debug qml-network qtquickcompiler static tests"

# Qt SerialPort
PACKAGECONFIG_pn-qtserialport_remove=" examples qtquickcompiler tests"

# Qt XMLpatterns
PACKAGECONFIG_pn-qtxmlpatterns_remove = " examples qtquickcompiler tests"

# Qt Multimedia
PACKAGECONFIG_pn-qtmultimedia_remove=" examples gstreamer010 openal pulseaudio qtquickcompiler tests"
PACKAGECONFIG_pn-qtmultimedia_append=" alsa"
PACKAGECONFIG_pn-qtmultimedia_append=" gstreamer"

# GStreamer
PACKAGECONFIG_pn-gstreamer1.0_remove=" debug tests valgrind"
PACKAGECONFIG_pn-gstreamer1.0-plugins-base_remove=" cdparanoia debug gio-unix-2.0 ivorbis opus orc pango theora valgrind visual"
PACKAGECONFIG_pn-gstreamer1.0-plugins-base_append=" alsa ogg vorbis x11"

# Ntp
#PACKAGECONFIG_pn-ntp_remove=" debug"

# GPSd
#PACKAGECONFIG_pn-gpsd_remove=" bluez qt"

# Ftpd
#PACKAGECONFIG_pn-inetutils_append = " uucpd ftp"

# Ofono
PACKAGECONFIG_pn-ofono_remove = " bluez systemd"

# ConnMan
#PACKAGECONFIG_pn-connman_remove = " bluez systemd openvpn vpnc l2tp pptp tist wispr nftables"
PACKAGECONFIG_pn-connman_append = " 3g iptables"
#PACKAGECONFIG_pn-libconnman-qt5_remove = " examples tests"

# Proftpd
PACKAGECONFIG_pn-proftpd_remove=" acl cap ctrls curses dso getopt nls pam pcre sendfile sia"
PACKAGECONFIG_pn-proftpd_append = " auth shadow ipv6 largefile openssl strip"

# Upower
#DISTRO_FEATURES_append = " polkit"
#PACKAGECONFIG_pn-upower_remove = " systemd"

# NetworkManager and ModemManager
#PACKAGECONFIG_pn-networkmanager_remove = " bluez5 consolekit wifi qt4-x11-free dnsmasq systemd"
#PACKAGECONFIG_pn-networkmanager_append = " dhclient ppp modemmanager nss"
#PACKAGECONFIG_pn-modemmanager_remove = " systemd"
